RewriteEngine On

# Rediriger les routes API cargaisons vers le script PHP
RewriteRule ^api/cargaisons/([^/]+)/(close|reopen|start|arrive)/?$ api/cargaisons.php [QSA,L]

# Rediriger les routes API colis vers le script PHP
RewriteRule ^api/colis/([^/]+)/(recupere|perdu|recu)/?$ api/colis.php [QSA,L]
RewriteRule ^api/colis/(search|track)/?$ api/colis.php [QSA,L]

# Rediriger les statistiques vers le script PHP
RewriteRule ^api/statistiques/?$ api/statistiques.php [QSA,L]

# Rediriger toutes les autres routes API vers index.html pour une SPA
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/api/
RewriteRule ^.*$ index.html [QSA,L]
